resource:
  name: bookinfo 

apps:
  details:
    v1:
      replicaCount: 1
      version: "v1"
      matchLabels:
        app: details
        version: v1
      image:
        repository: docker.io/maistra/examples-bookinfo-details
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: "0.12.0"
      serviceAccount:
        create: true
        annotations: {}
        # If not set and create is true, a name is generated using the fullname template
        name: "details"
  productpage:
    v1:
      replicaCount: 1
      version: "v1"
      matchLabels:
        app: productpage
        version: v1
      image:
        repository: docker.io/maistra/examples-bookinfo-productpage
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: "0.12.0"
      serviceAccount:
        create: true
        annotations: {}
        # If not set and create is true, a name is generated using the fullname template
        name: "productpage" 
  ratings:
    v1:
      replicaCount: 1
      version: "v1"
      matchLabels:
        app: ratings
        version: v1
      image:
        repository: docker.io/maistra/examples-bookinfo-ratings
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: "0.12.0"
      serviceAccount:
        create: true
        annotations: {}
        # If not set and create is true, a name is generated using the fullname template
        name: "ratings"
  reviews:
    v1:
      replicaCount: 1
      version: "v1"
      matchLabels:
        app: reviews
        version: v1
      image:
        repository: docker.io/maistra/examples-bookinfo-reviews
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: "0.12.0"
      serviceAccount:
        create: true
        annotations: {}
        # If not set and create is true, a name is generated using the fullname template
        name: "reviews"
        
securityContext:
  capabilities:
    drop:
    - ALL
  allowPrivilegeEscalation: false
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

podAnnotations:
  sidecar.istio.io/inject: "true"

service:
  port: 9080

mesh:
  trafficPolicy: ISTIO_MUTUAL